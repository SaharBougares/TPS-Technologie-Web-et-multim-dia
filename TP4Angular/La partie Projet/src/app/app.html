<div class="container">
  <!-- Score Section -->
  <div class="score-section">
    <h2>ğŸ® Quiz Game</h2>
    <p>Score actuel : {{ score }}</p>
    <p>Bonnes rÃ©ponses : {{ correctAnswers }}</p>
    <p>Mauvaises rÃ©ponses : {{ incorrectAnswers }}</p>
  </div>

  <!-- Ã‰tape 1 & 2 : Affichage Conditionnel avec *ngIf et ItÃ©ration avec *ngFor -->
  <!-- DÃ©fi 1 : Questions affichÃ©es une Ã  la fois -->
  <div *ngFor="let question of questions">
    <!-- Ã‰tape 3 : Combinaison de *ngIf et *ngFor - Masquer une question une fois rÃ©pondue -->
    <div *ngIf="!question.answered">
      <h3>{{ question.question }}</h3>
      
      <!-- ItÃ©ration sur les options avec *ngFor -->
      <div style="display: flex; flex-wrap: wrap; gap: 12px; margin-bottom: 20px;">
        <button 
          *ngFor="let option of question.options"
          class="quiz-button"
          [ngClass]="{
            'correct-answer': question.answered && isCorrect(option, question),
            'incorrect-answer': question.answered && !isCorrect(option, question) && option === question.selectedAnswer,
            'neutral-answer': question.answered && !isCorrect(option, question) && option !== question.selectedAnswer
          }"
          [disabled]="question.answered"
          (click)="onSelectOption(option, question)">
          {{ option }}
        </button>
      </div>
    </div>
  </div>

  <!-- Affichage du message de feedback avec *ngIf -->
  <div *ngIf="isReponse; else incorrectMessage" class="feedback-message correct">
    <p>âœ… Bonne rÃ©ponse ! Vous gagnez 10 points.</p>
  </div>
  <ng-template #incorrectMessage>
    <div *ngIf="showFeedback" class="feedback-message incorrect">
      <p>âŒ Mauvaise rÃ©ponse. Vous perdez 5 points.</p>
    </div>
  </ng-template>

  <!-- DÃ©fi 2 : Tableau d'historique des rÃ©ponses avec *ngFor -->
  <div *ngIf="answerHistory.length > 0" class="history-section">
    <h3>ğŸ“‹ Historique des rÃ©ponses</h3>
    <div class="history-item" *ngFor="let item of answerHistory" [ngClass]="item.isCorrect ? 'correct' : 'incorrect'">
      <div class="question-title">{{ item.question }}</div>
      <span class="answer-status" [ngClass]="item.isCorrect ? 'correct-answer' : 'incorrect-answer'">
        {{ item.isCorrect ? 'âœ“ Correct' : 'âœ— Incorrect' }}
      </span>
    </div>
  </div>

  <!-- DÃ©fi 3 : Bouton "Terminer le jeu" visible uniquement quand toutes les questions sont rÃ©pondues -->
  <button *ngIf="allQuestionsAnswered" (click)="finishGame()" class="finish-button">
    âœ“ Terminer le jeu
  </button>

  <!-- Affichage des rÃ©sultats finaux -->
  <div *ngIf="gameFinished" class="game-finished">
    <h2>ğŸ‰ Jeu TerminÃ©!</h2>
    <div class="final-score">{{ score }}</div>
    <p style="color: #6b7280; font-size: 1.1em; margin-bottom: 30px;">points</p>
    
    <div class="final-stats">
      <div class="stat">
        <div class="stat-label">Bonnes rÃ©ponses</div>
        <div class="stat-value correct">{{ correctAnswers }}</div>
      </div>
      <div class="stat">
        <div class="stat-label">Mauvaises rÃ©ponses</div>
        <div class="stat-value incorrect">{{ incorrectAnswers }}</div>
      </div>
      <div class="stat">
        <div class="stat-label">Taux de rÃ©ussite</div>
        <div class="stat-value correct">{{ ((correctAnswers / questions.length) * 100) | number: '1.0-0' }}%</div>
      </div>
    </div>

    <button (click)="resetGame()" class="finish-button">
      ğŸ”„ Recommencer
    </button>
  </div>
</div>
